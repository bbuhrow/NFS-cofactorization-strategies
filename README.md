# nfs_3lp_batch_factor
This package implements a variety of methods for fast cofactorization of 
NFS relations with 2 or 3 large primes, generated by GGNFS lattice siever.

# build instructions
First navigate to the mpqs3 folder.

The makefile for mpqs3 may need to be edited to customize to your local software environment.

If you have a custom GMP location, specify it on line 12 and 10 of the Makefile

type:

make all

Now navigate back to the main repository.

The makefile here may also require a few small changes to customize to your local software environment.

Specify your CUDA toolkit version on line 6.  This is necessary because Nvidia changed
their API in version 13 and the code needs to know which version to use.

If you have a custom CUDA toolkit location uncomment and specify the location on line 7, otherwise
make sure this line is commented with a leading #

If you have a custom GMP location, specify it in lines 9 and 10 of the Makefile

Specify your target CUDA architecture in line 11 (examples: SM=90 for 9.0, SM=80 for 8.0).  This 
will depend on your card.

If you have a cpu that is AVX512 capable, optionally add SKYLAKEX=1 to the make command

If you have a cpu that is AVX512 and AVX512-IFMA capable, optionally add ICELAKE=1 to the make command

If your cpu does not have AVX2 or BMI2 instructions the build may still work by removing -DUSE_BMI2 and -DUSE_AVX2 from the CFLAGS line (not tested).

example:
make all ICELAKE=1

# usage instructions
unzip the example file rels.zip.  As of now the project only looks for relations in the file rels.raw provided here.

The project implements two methods of batch factorization: GCD based and CUDA-ECM based

select which method to use using command line option -m (--method) 

0 for CUDA-ECM 

1 for batch GCD

2 for standard ecm+mpqs strategy

3 for mpqs only strategy

If using CUDA-ECM these options are also available:

specify 3LP B1 bound with -b1 option and one of the following integers

-b1 <200, 250, 300, 400, 500, 600, 700>   

specify 3LP B2 bound as a multiplier to B1 using -b2 option.  typical value is 50

-b2 50

specify 3LP number of curves with -c.  typical value is 100

-c 100

specify 3LP stopping condition with -s. 3LP ECM will stop after not finding any valid factors for -s curves.  typical values are 10, 15, 20

-s 10

example:

./cuda-3lp -m 0 -b1 500 -b2 50 -c 100 -s 10



